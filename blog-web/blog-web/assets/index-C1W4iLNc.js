import{s as r,n as i}from"./index-05qZtuZM.js";function l(){return r({url:"/api/friend/list",method:"get"})}function o(a){return r({url:"/api/friend/apply",method:"post",data:a})}const n={name:"Friends",data(){return{showApplyForm:!1,form:{name:"",url:"",info:"",avatar:"",email:""},friends:[],rules:{name:[{required:!0,message:"请输入网站名称",trigger:"blur"}],url:[{required:!0,message:"请输入网站链接",trigger:"blur"},{type:"url",message:"请输入正确的链接格式",trigger:"blur"}],info:[{required:!0,message:"请输入网站描述",trigger:"blur"}],avatar:[{required:!0,message:"请输入头像链接",trigger:"blur"},{type:"url",message:"请输入正确的链接格式",trigger:"blur"}],email:[{required:!0,message:"请输入联系邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}]}}},async created(){const a=await l();this.friends=a.data},methods:{visitFriend(a){window.open(a,"_blank")},handleApply(){this.form={name:"",url:"",info:"",avatar:"",email:""},this.showApplyForm=!0},handleClose(){this.showApplyForm=!1},submitApplication(){this.$refs.ruleForm.validate(a=>{if(a)try{const s=o(this.form);this.showApplyForm=!1,this.$message.success("申请已提交，请等待审核"),this.$refs.ruleForm.resetFields()}catch(s){this.$message.error(s.message)}else console.log("error submit!!")})},copyLogoUrl(){this.$refs.logoInput.select(),document.execCommand("copy"),this.$message.success("Logo链接已复制到剪贴板")},copyUrl(){this.$refs.urlInput.select(),document.execCommand("copy"),this.$message.success("链接已复制到剪贴板")}}};var c=function(){var s=this,t=s._self._c;return t("div",{staticClass:"friends-page"},[t("el-card",{staticClass:"content-card"},[t("div",{staticClass:"page-header"},[t("h1",[s._v("友情链接")]),t("div",{staticClass:"header-divider"},[t("span",{staticClass:"line"}),t("i",{staticClass:"fas fa-link"}),t("span",{staticClass:"line"})]),t("p",[s._v("与优秀的人同行，分享技术与生活")]),t("div",{staticClass:"site-info"},[t("div",{staticClass:"site-avatar"},[t("div",{staticClass:"avatar-wrapper"},[t("el-avatar",{staticClass:"avatar",attrs:{src:s.$store.state.webSiteInfo.logo}}),t("div",{staticClass:"copy-overlay",on:{click:s.copyLogoUrl}},[t("i",{staticClass:"fas fa-copy"}),t("span",[s._v("复制图片链接")]),t("input",{ref:"logoInput",staticStyle:{position:"absolute",opacity:"0"},attrs:{type:"text",readonly:""},domProps:{value:s.$store.state.webSiteInfo.logo}})])],1)]),t("div",{staticClass:"site-details"},[t("h2",[s._v(s._s(s.$store.state.webSiteInfo.name))]),t("p",[s._v(s._s(s.$store.state.webSiteInfo.summary))]),t("div",{staticClass:"site-url"},[t("i",{staticClass:"fas fa-link"}),t("input",{ref:"urlInput",attrs:{type:"text",readonly:""},domProps:{value:s.$store.state.webSiteInfo.webUrl},on:{click:s.copyUrl}}),t("button",{staticClass:"copy-btn",on:{click:s.copyUrl}},[t("i",{staticClass:"fas fa-copy"})])])])]),t("div",{staticClass:"copy-tip"},[t("i",{staticClass:"fas fa-info-circle"}),s._v(" 申请友链前请先添加本站链接 "),t("span",{staticClass:"tip-highlight"},[s._v("「 点击上方链接可快速复制 」")])]),t("button",{staticClass:"apply-btn",on:{click:s.handleApply}},[t("i",{staticClass:"fas fa-plus"}),s._v(" 申请友链 ")])]),t("div",{staticClass:"friends-container"},[t("div",{staticClass:"section-title"},[t("h2",[s._v("友链列表")]),t("span",{staticClass:"count"},[s._v(s._s(s.friends.length)+" 个伙伴")])]),t("div",{staticClass:"friends-grid"},s._l(s.friends,function(e){return t("div",{key:e.id,staticClass:"friend-card",on:{click:function(f){return s.visitFriend(e.url)}}},[t("div",{staticClass:"friend-avatar"},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatar,expression:"friend.avatar"}],key:e.avatar,attrs:{alt:e.name}}),t("div",{staticClass:"status",class:{online:e.online}})]),t("div",{staticClass:"friend-info"},[t("h3",[s._v(s._s(e.name))]),t("p",[s._v(s._s(e.info))])])])}),0)]),t("el-dialog",{attrs:{visible:s.showApplyForm,title:"申请友链",width:"500px",top:"3vh","append-to-body":!0},on:{"update:visible":function(e){s.showApplyForm=e}}},[t("div",{staticClass:"apply-form"},[t("el-form",{ref:"ruleForm",attrs:{size:"small",model:s.form,rules:s.rules,"label-width":"100px"}},[t("div",{staticClass:"form-group"},[t("el-form-item",{attrs:{prop:"name"},scopedSlots:s._u([{key:"label",fn:function(){return[t("i",{staticClass:"fas fa-signature"}),s._v(" 网站名称 ")]},proxy:!0}])}),t("el-input",{attrs:{type:"text",placeholder:"请输入您的网站名称"},model:{value:s.form.name,callback:function(e){s.$set(s.form,"name",e)},expression:"form.name"}})],1),t("div",{staticClass:"form-group"},[t("el-form-item",{attrs:{prop:"url"},scopedSlots:s._u([{key:"label",fn:function(){return[t("i",{staticClass:"fas fa-link"}),s._v(" 网站链接 ")]},proxy:!0}])}),t("el-input",{attrs:{type:"url",placeholder:"请输入您的网站链接"},model:{value:s.form.url,callback:function(e){s.$set(s.form,"url",e)},expression:"form.url"}})],1),t("div",{staticClass:"form-group"},[t("el-form-item",{attrs:{prop:"info"},scopedSlots:s._u([{key:"label",fn:function(){return[t("i",{staticClass:"fas fa-quote-left"}),s._v(" 网站描述 ")]},proxy:!0}])}),t("el-input",{attrs:{type:"url",placeholder:"一句话描述您的网站"},model:{value:s.form.info,callback:function(e){s.$set(s.form,"info",e)},expression:"form.info"}})],1),t("div",{staticClass:"form-group"},[t("el-form-item",{attrs:{prop:"avatar"},scopedSlots:s._u([{key:"label",fn:function(){return[t("i",{staticClass:"fas fa-image"}),s._v(" 头像链接 ")]},proxy:!0}])}),t("el-input",{attrs:{type:"url",placeholder:"请输入您的头像链接"},model:{value:s.form.avatar,callback:function(e){s.$set(s.form,"avatar",e)},expression:"form.avatar"}})],1),t("div",{staticClass:"form-group"},[t("el-form-item",{attrs:{prop:"email"},scopedSlots:s._u([{key:"label",fn:function(){return[t("i",{staticClass:"fas fa-envelope"}),s._v(" 联系邮箱 ")]},proxy:!0}])}),t("el-input",{attrs:{type:"url",placeholder:"邮箱用于联系"},model:{value:s.form.email,callback:function(e){s.$set(s.form,"email",e)},expression:"form.email"}})],1),t("div",{staticClass:"form-footer"},[t("el-button",{staticClass:"submit-btn",attrs:{type:"primary"},on:{click:s.submitApplication}},[t("i",{staticClass:"fas fa-paper-plane"}),s._v(" 提交申请 ")])],1)])],1)])],1)],1)},p=[],u=i(n,c,p,!1,null,"1f473e08");const d=u.exports;export{d as default};
