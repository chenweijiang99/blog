import{n as m,f as o,g as l}from"./index-05qZtuZM.js";const c={name:"Moments",data(){return{moments:[],loading:!1,total:0,params:{pageNum:1,pageSize:10}}},mounted(){this.fetchMoments()},methods:{parseImages(s){return s?s.split(",").filter(a=>a):[]},async fetchMoments(){try{this.loading=!0;const s=await l(this.params);this.moments=s.data.records,this.total=s.data.total,this.moments.forEach(a=>{a.images=this.parseImages(a.images)})}catch(s){console.error("获取说说列表失败:",s)}finally{this.loading=!1}},handlePageChange(s){this.params.pageNum=s,this.fetchMoments()},previewImage(s,a){this.$refs.imagePreview.show(s,a)},formatTime(s){return o(s)}}};var g=function(){var a=this,e=a._self._c;return e("div",{staticClass:"moments-container"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],staticClass:"moments-list"},[a._l(a.moments,function(t){var i;return e("div",{key:t.id,staticClass:"moment-item"},[e("div",{staticClass:"user-avatar"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.avatar,expression:"moment.avatar"}],key:t.avatar,staticClass:"avatar"}),e("div",{staticClass:"mobile-user-info"},[e("span",{staticClass:"name"},[a._v(a._s(t.nickname))]),e("span",{staticClass:"time"},[e("i",{staticClass:"fas fa-clock"}),a._v(" "+a._s(a.formatTime(t.createTime))+" ")])])]),e("div",{staticClass:"moment-main"},[e("div",{staticClass:"moment-header"},[e("span",{staticClass:"name"},[a._v(a._s(t.nickname))]),e("span",{staticClass:"time"},[e("i",{staticClass:"fas fa-clock"}),a._v(" "+a._s(a.formatTime(t.createTime))+" ")])]),e("div",{staticClass:"moment-content-wrapper"},[e("div",{staticClass:"moment-content",domProps:{innerHTML:a._s(t.content)}}),(i=t.images)!=null&&i.length?e("div",{staticClass:"moment-images"},a._l(t.images,function(n,r){return e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:n,expression:"img"}],key:n,on:{click:function(p){return a.previewImage(t.images,r)}}})}),0):a._e()])])])}),e("div",{staticClass:"pagination-box"},[a.moments.length?e("el-pagination",{attrs:{background:"","current-page":a.params.pageNum,"page-size":a.params.pageSize,layout:"prev, pager, next",total:a.total},on:{"current-change":a.handlePageChange}}):a._e()],1)],2),e("mj-image-preview",{ref:"imagePreview"})],1)},v=[],d=m(c,g,v,!1,null,"28272529");const u=d.exports;export{u as default};
